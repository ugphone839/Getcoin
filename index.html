<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Nh·∫≠n Coin ƒê√£ Ho√†n Th√†nh</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* CSS cho n√∫t nh·∫≠n coin */
        #claimButton {
            background-color: #ffc107; /* V√†ng */
            color: #333;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: background-color 0.3s;
            box-shadow: 0 4px #e0a800;
        }
        #claimButton:hover {
            background-color: #e0a800;
        }
        #claimButton:disabled {
            background-color: #6c757d;
            box-shadow: none;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ Ho√†n Th√†nh! Chu·∫©n b·ªã nh·∫≠n Coin</h1>
        <p class="description" id="message">Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ x√°c nh·∫≠n v√† nh·∫≠n Coin v√†o t√†i kho·∫£n Discord c·ªßa b·∫°n.</p>
        
        <button id="claimButton" onclick="claimCoin()">üî• Nh·∫≠n Coin Ngay</button>
        
        <div id="statusContainer" class="link-box hidden">
            <p id="statusText" class="success-message"></p>
        </div>
    </div>

    <script>
        // L·∫•y Key t·ª´ URL (v√≠ d·ª•: /claim.html?key=abc-123)
        const urlParams = new URLSearchParams(window.location.search);
        const userKey = urlParams.get('key');

        const API_SERVER_URL = "https://your-bot-ip-or-domain.com"; // THAY TH·∫æ B·∫∞NG IP C√îNG C·ªòNG/DOMAIN C√ì PORT C·ª¶A SERVER BOT
        const API_ENDPOINT = `${API_SERVER_URL}:${8080}/api/claim_coin`; // C·∫ßn m·ªü Port 8080 tr√™n server Bot

        const claimButton = document.getElementById('claimButton');
        const statusContainer = document.getElementById('statusContainer');
        const statusText = document.getElementById('statusText');
        const messageDisplay = document.getElementById('message');

        if (!userKey) {
            messageDisplay.textContent = "‚ö†Ô∏è L·ªói: Kh√¥ng t√¨m th·∫•y Key Coin. Vui l√≤ng th·ª≠ l·∫°i t·ª´ Bot Discord.";
            claimButton.disabled = true;
        }

        async function claimCoin() {
            if (!userKey || claimButton.disabled) return;

            claimButton.disabled = true;
            messageDisplay.textContent = 'ƒêang g·ª≠i y√™u c·∫ßu x√°c nh·∫≠n...';
            statusContainer.classList.add('hidden');

            const fullApiUrl = `${API_ENDPOINT}?key=${userKey}`;

            try {
                const response = await fetch(fullApiUrl);
                const data = await response.json();
                
                statusContainer.classList.remove('hidden');
                
                if (data.status === 'success') {
                    statusText.textContent = data.message + " Coin s·∫Ω ƒë∆∞·ª£c c·ªông v√†o Discord c·ªßa b·∫°n.";
                    statusText.className = 'success-message';
                    messageDisplay.textContent = 'Th√†nh c√¥ng! Ki·ªÉm tra tin nh·∫Øn ri√™ng t∆∞ tr√™n Discord.';
                } else {
                    statusText.textContent = `Th·∫•t b·∫°i: ${data.message}`;
                    statusText.className = 'error-message';
                    messageDisplay.textContent = 'Y√™u c·∫ßu kh√¥ng th√†nh c√¥ng. Key ƒë√£ d√πng ho·∫∑c kh√¥ng h·ª£p l·ªá.';
                }
            } catch (error) {
                console.error("L·ªói k·∫øt n·ªëi:", error);
                statusContainer.classList.remove('hidden');
                statusText.textContent = 'L·ªói k·∫øt n·ªëi ƒë·∫øn m√°y ch·ªß Bot. Vui l√≤ng b√°o cho Admin.';
                statusText.className = 'error-message';
            }
        }
    </script>
</body>
</html>
